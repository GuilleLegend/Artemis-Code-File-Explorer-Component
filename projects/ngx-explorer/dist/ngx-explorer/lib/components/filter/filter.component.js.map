{"version":3,"file":"filter.component.js","sourceRoot":"","sources":["../../../../../src/lib/components/filter/filter.component.ts"],"names":[],"mappings":";AAAA,OAAO,EAAE,SAAS,EAAc,MAAM,EAAa,SAAS,EAAE,MAAM,eAAe,CAAC;AACpF,OAAO,EAAmB,YAAY,EAAE,MAAM,MAAM,CAAC;AACrD,OAAO,EAAE,aAAa,EAAE,MAAM,+BAA+B,CAAC;AAQvD,IAAM,eAAe,GAArB,MAAM,eAAe;IAK1B,YAA2C,MAA+B,EAAE,eAAgC;QAAjE,WAAM,GAAN,MAAM,CAAyB;QAFlE,QAAG,GAAG,IAAI,YAAY,EAAE,CAAC;QAG/B,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE;YAC/C,IAAI,CAAC,KAAK,EAAE,CAAC;QACf,CAAC,CAAC,CAAC,CAAC;IACN,CAAC;IAED,QAAQ,CAAC,CAAgB,EAAE,KAAa;QACtC,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,EAAE;YACtB,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;YACrB,OAAO;SACR;QACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC;IACjC,CAAC;IAED,KAAK;QACH,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YAAE,OAAO;SAAE;QAC5B,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,KAAK,GAAG,EAAE,CAAC;QACpC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;IACvB,CAAC;IAED,WAAW;QACT,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC;IACzB,CAAC;CAEF,CAAA;AA7BqB;IAAnB,SAAS,CAAC,OAAO,CAAC;8CAAqC;AAD7C,eAAe;IAL3B,SAAS,CAAC;QACT,QAAQ,EAAE,YAAY;QACtB,WAAW,EAAE,yBAAyB;QACtC,SAAS,EAAE,CAAC,yBAAyB,CAAC;KACvC,CAAC;IAMa,WAAA,MAAM,CAAC,aAAa,CAAC,CAAA;GALvB,eAAe,CA8B3B;SA9BY,eAAe","sourcesContent":["import { Component, ElementRef, Inject, OnDestroy, ViewChild } from '@angular/core';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { FILTER_STRING } from '../../injection-tokens/tokens';\r\nimport { ExplorerService } from '../../services/explorer.service';\r\n\r\n@Component({\r\n  selector: 'nxe-filter',\r\n  templateUrl: './filter.component.html',\r\n  styleUrls: ['./filter.component.scss']\r\n})\r\nexport class FilterComponent implements OnDestroy {\r\n  @ViewChild('input') input: ElementRef<HTMLInputElement>;\r\n\r\n  private sub = new Subscription();\r\n\r\n  constructor(@Inject(FILTER_STRING) private filter: BehaviorSubject<string>, explorerService: ExplorerService) {\r\n    this.sub.add(explorerService.tree.subscribe(() => {\r\n      this.clear();\r\n    }));\r\n  }\r\n\r\n  onChange(e: KeyboardEvent, value: string) {\r\n    if (e.key === 'Escape') {\r\n      this.input.nativeElement.value = '';\r\n      this.filter.next('');\r\n      return;\r\n    }\r\n    this.filter.next(value.trim());\r\n  }\r\n\r\n  clear() {\r\n    if (!this.input) { return; }\r\n    this.input.nativeElement.value = '';\r\n    this.filter.next('');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub.unsubscribe();\r\n  }\r\n\r\n}\r\n"]}